{"ast":null,"code":"var _jsxFileName = \"/Users/redli/Desktop/14/Bota/Code/ai_scientist_claude/src/pages/ScienceAIPlatform.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { ChevronDown, ChevronRight, Database, Search, Zap, Brain, Layers, CheckCircle, Book, AlignJustify, FileText, Award, Server, BarChart3, Code, Folder, FolderOpen, File, BookOpen, Microscope, Globe, PieChart, Lock, Terminal, Monitor, Plus, User, MessageCircle, Sparkles, Activity, Settings, Maximize, Minimize, ArrowRight, Save, Calendar, DollarSign, Target, Edit, Layout, Send, X, Check, HelpCircle, RefreshCw, Play, MoreHorizontal, Dna, Beaker, FlaskConical, PlayCircle } from 'lucide-react';\nimport { dateUtils } from '../utils/dateUtils';\nimport FileExplorer from '../components/layout/FileExplorer';\nimport WorkflowVisualizer from '../components/scientist/WorkflowVisualizer';\nimport ChatInterface from '../components/scientist/ChatInterface';\nimport DocumentEditor from '../components/scientist/DocumentEditor';\nimport PlasmidViewer from '../components/scientist/PlasmidViewer';\nimport SetupWizard from '../components/scientist/SetupWizard';\nimport '../styles/ScienceAIPlatform.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ScienceAIPlatform = () => {\n  _s();\n  // Check for existing project in localStorage\n  const savedProject = localStorage.getItem('aiScientistProject');\n  const initialProjectData = savedProject ? JSON.parse(savedProject) : {\n    name: '',\n    objectives: [''],\n    timeline: ''\n  };\n  const hasExistingProject = savedProject !== null;\n\n  // Page state - redirect to workspace if project exists\n  const [currentPage, setCurrentPage] = useState(hasExistingProject ? 'workspace' : 'home');\n  const [projectReady, setProjectReady] = useState(hasExistingProject);\n\n  // Project data\n  const [projectData, setProjectData] = useState(initialProjectData);\n\n  // Workspace state\n  const [showWorkflow, setShowWorkflow] = useState(false);\n  const [activeStep, setActiveStep] = useState(0);\n  const [userQuery, setUserQuery] = useState('');\n  const [documentContent, setDocumentContent] = useState('');\n  const [chatHistory, setChatHistory] = useState([]);\n  const [editableContent, setEditableContent] = useState(localStorage.getItem('aiScientistResearchPlan') || '');\n  const [selectedText, setSelectedText] = useState('');\n  const [selectionPos, setSelectionPos] = useState({\n    x: 0,\n    y: 0\n  });\n  const [showTextSelector, setShowTextSelector] = useState(false);\n  const [textQuestion, setTextQuestion] = useState('');\n  const [showSuggestion, setShowSuggestion] = useState(false);\n  const [aiSuggestion, setAiSuggestion] = useState('');\n  const [generatingPlan, setGeneratingPlan] = useState(false);\n\n  // Status variables\n  const [showNewFileMenu, setShowNewFileMenu] = useState(false);\n  const [showPlasmidViewer, setShowPlasmidViewer] = useState(false);\n  const [runningBenchling, setRunningBenchling] = useState(false);\n\n  // Refs\n  const contentEditableRef = useRef(null);\n  const newFileMenuRef = useRef(null);\n\n  // Auto-save editable content to localStorage\n  useEffect(() => {\n    if (editableContent && projectReady) {\n      localStorage.setItem('aiScientistResearchPlan', editableContent);\n    }\n  }, [editableContent, projectReady]);\n\n  // Workflow steps\n  const steps = [{\n    id: 0,\n    title: \"Scientist Query\",\n    icon: /*#__PURE__*/_jsxDEV(Microscope, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 46\n    }, this)\n  }, {\n    id: 1,\n    title: \"Query Preprocessing\",\n    icon: /*#__PURE__*/_jsxDEV(AlignJustify, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 50\n    }, this)\n  }, {\n    id: 2,\n    title: \"Knowledge Retrieval\",\n    icon: /*#__PURE__*/_jsxDEV(Search, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 50\n    }, this)\n  }, {\n    id: 3,\n    title: \"Index Matching\",\n    icon: /*#__PURE__*/_jsxDEV(Database, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 45\n    }, this)\n  }, {\n    id: 4,\n    title: \"Knowledge Recall\",\n    icon: /*#__PURE__*/_jsxDEV(BookOpen, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 47\n    }, this)\n  }, {\n    id: 5,\n    title: \"Information Integration\",\n    icon: /*#__PURE__*/_jsxDEV(Layers, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 54\n    }, this)\n  }, {\n    id: 6,\n    title: \"Inference Generation\",\n    icon: /*#__PURE__*/_jsxDEV(Brain, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 51\n    }, this)\n  }, {\n    id: 7,\n    title: \"Answer Optimization\",\n    icon: /*#__PURE__*/_jsxDEV(Zap, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 50\n    }, this)\n  }, {\n    id: 8,\n    title: \"Final Answer\",\n    icon: /*#__PURE__*/_jsxDEV(Award, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 43\n    }, this)\n  }];\n\n  // Step logs\n  const stepLogs = {\n    0: [\"[LOG] 11:42:03 - Receiving scientist query\", \"[LOG] 11:42:03 - Starting query parsing engine\", \"[LOG] 11:42:04 - Entity recognition complete: 3 key entities\", \"[LOG] 11:42:04 - Classified as bioengineering specialized query\"],\n    1: [\"[LOG] 11:42:05 - Starting query preprocessing\", \"[LOG] 11:42:06 - Generating query vector representation\", \"[LOG] 11:42:06 - Applying domain adaptation layer\", \"[LOG] 11:42:07 - Identifying implicit needs: experimental design required\"],\n    2: [\"[LOG] 11:42:08 - Starting distributed retrieval engine\", \"[LOG] 11:42:09 - Simultaneously searching 4 external academic databases\", \"[LOG] 11:42:10 - Searching internal experiment records\", \"[LOG] 11:42:11 - Retrieving Benchling project data: PRJ-528974\"],\n    3: [\"[LOG] 11:42:12 - Computing query vector similarity with knowledge base indices\", \"[LOG] 11:42:13 - Using HNSW algorithm to accelerate similarity search\", \"[LOG] 11:42:14 - Adjusting relevance scores with time decay factor\", \"[LOG] 11:42:15 - Initial matching complete: 73 high-relevance indices identified\"],\n    4: [\"[LOG] 11:42:16 - Starting deep parsing of matched documents\", \"[LOG] 11:42:17 - Extracting key experimental steps from methods sections\", \"[LOG] 11:42:18 - Parsing tabular data: experimental parameter data\", \"[LOG] 11:42:19 - Extracting experimental design information from figures\"],\n    5: [\"[LOG] 11:42:20 - Starting information integration engine\", \"[LOG] 11:42:21 - Identifying associations between information sources\", \"[LOG] 11:42:22 - Using confidence-weighted resolution for data conflicts\", \"[LOG] 11:42:23 - Building knowledge graph: experimental design relationship network\"],\n    6: [\"[LOG] 11:42:24 - Starting inference engine\", \"[LOG] 11:42:25 - Constructing experimental design model\", \"[LOG] 11:42:26 - Optimizing experimental parameters: calculating optimal conditions\", \"[LOG] 11:42:27 - Deriving optimal experimental step sequence\"],\n    7: [\"[LOG] 11:42:28 - Starting answer optimization module\", \"[LOG] 11:42:29 - Restructuring answer organization\", \"[LOG] 11:42:30 - Validating key data reference sources\", \"[LOG] 11:42:31 - Terminology consistency check\"],\n    8: [\"[LOG] 11:42:32 - Generating final answer\", \"[LOG] 11:42:33 - Creating experimental design diagrams\", \"[LOG] 11:42:34 - Formatting references\", \"[LOG] 11:42:35 - Quality check: answer passed validation\"]\n  };\n\n  // Example research plan (generated based on project objectives)\n  const generateResearchPlan = () => {\n    return `# ${projectData.name} Research Plan\n\n## Project Overview\nThis project aims to ${projectData.objectives.join(\", and \")}. The plan is to complete all research work within ${projectData.timeline}.\n\n## Research Hypotheses\n1. **Primary Hypothesis**: By optimizing the expression system, we can significantly increase the yield and purity of the target protein\n2. **Secondary Hypothesis**: Precise control of expression conditions has a decisive impact on protein folding and activity\n3. **Test Metrics**: Expression level increase ≥30%, protein purity ≥95%, activity retention ≥85%\n\n## Experimental Design\n\n### Phase 1: Expression System Optimization (${projectData.timeline.split('to')[0]} - ${dateUtils.getDateAfterMonths(projectData.timeline, 2)})\n1. **Experiment 1.1**: Promoter screening and optimization\n   - Test 5 different strength promoters\n   - Establish fluorescent protein reporter system to evaluate promoter efficiency\n   - Use flow cytometry for quantitative analysis of expression levels\n\n2. **Experiment 1.2**: Signal peptide optimization\n   - Design and synthesize 3 different signal peptide sequences\n   - Construct test vectors and transform expression host\n   - Analyze secretion efficiency via Western blot\n\n### Phase 2: Culture Condition Optimization (${dateUtils.getDateAfterMonths(projectData.timeline, 2)} - ${dateUtils.getDateAfterMonths(projectData.timeline, 4)})\n1. **Experiment 2.1**: Culture medium component screening\n   - Orthogonal design of different carbon and nitrogen source combinations\n   - Monitor growth curves and protein expression levels\n   - Determine optimal culture medium formulation\n\n2. **Experiment 2.2**: Culture parameter optimization\n   - Use controlled variable method to test temperature, pH and dissolved oxygen conditions\n   - Establish response surface model to predict optimal combinations\n   - Verify model accuracy\n\n### Phase 3: Purification Process Development (${dateUtils.getDateAfterMonths(projectData.timeline, 4)} - ${projectData.timeline.split('to')[1]})\n1. **Experiment 3.1**: Chromatography condition screening\n   - Test different types of chromatography media\n   - Optimize elution conditions and gradient settings\n   - Improve protein purity and recovery rate\n\n2. **Experiment 3.2**: Final product quality analysis\n   - Perform mass spectrometric analysis to confirm protein integrity\n   - Test protein biological activity\n   - Evaluate stability and shelf life\n\n## Expected Results\n1. Determine the optimal expression system combination, increasing yield by 30-50%\n2. Establish a stable, reproducible production process\n3. Obtain high-quality, high-activity target protein\n\n## Timeline and Milestones\n- **${dateUtils.getDateAfterMonths(projectData.timeline, 2)}**: Complete expression system optimization, determine optimal promoter and signal peptide combination\n- **${dateUtils.getDateAfterMonths(projectData.timeline, 4)}**: Complete culture condition optimization, establish standard production process\n- **${projectData.timeline.split('to')[1]}**: Complete purification process development, submit final research report\n\n## Required Resources\n- Molecular biology experimental equipment and reagents\n- Bioreactors and fermentation equipment\n- Protein analysis equipment (HPLC, mass spectrometer, etc.)\n- Bioinformatics analysis software\n\n## Risk Assessment and Mitigation Strategies\n1. **Risk**: Expression level below expectation\n   **Mitigation**: Prepare alternative promoters and expression systems\n\n2. **Risk**: Protein aggregation or misfolding\n   **Mitigation**: Explore molecular chaperone co-expression strategies\n\n3. **Risk**: Large yield loss in purification process\n   **Mitigation**: Develop one-step purification method under mild conditions`;\n  };\n\n  // Experiment plan content\n  const experimentPlanContent = `# Genetic Engineering Experiment Plan\n\n## Experimental Objectives\nConstruct and validate a recombinant plasmid that efficiently expresses the target protein and achieve stable expression in Pichia pastoris.\n\n## Materials and Methods\n\n### 1. Plasmid Design\nBased on the latest research results, we have designed an optimized expression vector including the following elements:\n- **Promoter**: pAOX1 (methanol-inducible, high expression efficiency)\n- **Signal Peptide**: Optimized α-MF signal peptide (EA sequence deleted)\n- **Target Gene**: Codon-optimized human-derived gene\n- **Terminator**: AOX1 terminator\n- **Selection Marker**: Zeocin resistance gene\n\n### 2. Cloning Strategy\n1. PCR amplification of target gene, primer design includes appropriate restriction enzyme sites\n2. Restriction enzyme digestion of vector and target gene\n3. Ligation reaction to construct recombinant plasmid\n4. Transform E. coli DH5α\n5. Screen positive clones and verify sequence\n\n### 3. Host Transformation\n1. Linearize recombinant plasmid\n2. Prepare P. pastoris GS115 competent cells\n3. Electroporation\n4. Screen transformants on YPD plates containing Zeocin\n\n### 4. Expression Validation\n1. Small-scale expression test\n2. SDS-PAGE and Western blot analysis\n3. Protein activity determination\n\n## Expected Results\nThe constructed recombinant plasmid is expected to achieve efficient and stable target protein expression in P. pastoris, with protein yield ≥3.5g/L and purity ≥90%.\n\n## Schedule\n- Weeks 1-2: Plasmid design and construction\n- Weeks 3-4: Host transformation and screening\n- Weeks 5-8: Expression condition optimization and validation`;\n\n  // DNA sequence data (simulated)\n  const plasmidSequence = {\n    name: \"pPIC-hProtein-Opt\",\n    length: 8245,\n    features: [{\n      name: \"pAOX1 Promoter\",\n      start: 1,\n      end: 948,\n      color: \"#3B82F6\",\n      type: \"promoter\"\n    }, {\n      name: \"α-MF Signal\",\n      start: 949,\n      end: 1218,\n      color: \"#10B981\",\n      type: \"signal_peptide\"\n    }, {\n      name: \"Target Gene\",\n      start: 1219,\n      end: 4017,\n      color: \"#F43F5E\",\n      type: \"CDS\"\n    }, {\n      name: \"AOX1 Terminator\",\n      start: 4018,\n      end: 4352,\n      color: \"#A855F7\",\n      type: \"terminator\"\n    }, {\n      name: \"Zeocin Resistance\",\n      start: 4353,\n      end: 5153,\n      color: \"#F59E0B\",\n      type: \"marker\"\n    }, {\n      name: \"pUC Origin\",\n      start: 5154,\n      end: 7803,\n      color: \"#64748B\",\n      type: \"rep_origin\"\n    }, {\n      name: \"Ampicillin Resistance\",\n      start: 7804,\n      end: 8245,\n      color: \"#EC4899\",\n      type: \"marker\"\n    }],\n    sequence: \"ATGGCTATGCAGAAACTGAAAGCGCTGGCGACCCTGGAAGTGCGTCTGACCACCCTGAGC...\" // Abbreviated actual sequence\n  };\n\n  // Handle adding new file\n  const handleAddNewFile = fileType => {\n    let fileId = null;\n    let newContent = '';\n    switch (fileType) {\n      case 'project':\n        fileId = addFileToTree('folder', 'New Research Project');\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Create a new research project'\n        }, {\n          type: 'ai',\n          content: 'I have created a new research project. Please check the file tree on the left.'\n        }]);\n        break;\n      case 'objective':\n        fileId = addFileToTree('folder', 'New Research Objective');\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Add a new research objective'\n        }, {\n          type: 'ai',\n          content: 'New research objective added. You can view and edit it in the file tree on the left.'\n        }]);\n        break;\n      case 'plan':\n        fileId = addFileToTree('file', 'Research Plan');\n        // Update document content to research plan\n        setEditableContent(generateResearchPlan());\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Generate a research plan'\n        }, {\n          type: 'ai',\n          content: 'I have generated a detailed research plan based on your project objectives.'\n        }]);\n        break;\n      case 'hypothesis':\n        fileId = addFileToTree('file', 'Research Hypothesis');\n        newContent = `# Research Hypothesis\\n\\n## Primary Hypothesis\\nIn ${projectData.name || \"current research\"}, we hypothesize that by optimizing expression system components and culture conditions, we can significantly increase the yield and quality of the target protein.\\n\\n## Secondary Hypotheses\\n1. Promoter selection has a decisive effect on expression level\\n2. Signal peptide optimization can improve secretion efficiency\\n3. Precise control of culture conditions can reduce protein degradation\\n\\n## Hypothesis Testing Methods\\nWe will validate these hypotheses through systematic experimental design and control experiments, including:\\n- Comparing expression levels of different promoter systems\\n- Measuring secretion efficiency of improved signal peptides\\n- Monitoring protein yield and quality under different culture conditions`;\n        setEditableContent(newContent);\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Create research hypothesis'\n        }, {\n          type: 'ai',\n          content: 'I have created a research hypothesis document that you can further modify as needed.'\n        }]);\n        break;\n      case 'experiment':\n        fileId = addFileToTree('file', 'Experiment Plan');\n        // Update to experiment plan\n        setEditableContent(experimentPlanContent);\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Generate an experiment plan'\n        }, {\n          type: 'ai',\n          content: 'I have generated a genetic engineering experiment plan. You can view it and run gene construction simulation.'\n        }]);\n        break;\n    }\n    return fileId;\n  };\n\n  // Handle running genetic simulation\n  const handleRunGeneticSimulation = () => {\n    setRunningBenchling(true);\n\n    // Simulate running Benchling API\n    setTimeout(() => {\n      setRunningBenchling(false);\n      setShowPlasmidViewer(true);\n\n      // Add to chat history\n      setChatHistory(prev => [...prev, {\n        type: 'ai',\n        content: 'Gene design and simulation completed. Successfully constructed target plasmid: pPIC-hProtein-Opt (8245 bp).'\n      }]);\n    }, 3000);\n  };\n\n  // Simulate knowledge base processing workflow\n  const simulateWorkflow = (fullCycle = true) => {\n    let step = 0;\n    const interval = setInterval(() => {\n      if (step < steps.length) {\n        setActiveStep(step);\n        step++;\n      } else {\n        clearInterval(interval);\n        if (fullCycle) {\n          // Add answer after simulation is complete\n          setEditableContent(experimentPlanContent);\n          setChatHistory(prev => [...prev, {\n            type: 'ai',\n            content: 'I have completed the answer based on the knowledge base. The result has been added to the document.'\n          }]);\n        }\n      }\n    }, 1000);\n  };\n\n  // Handle project form change\n  const handleProjectChange = (field, value, index) => {\n    if (field === 'objectives' && index !== undefined) {\n      setProjectData(prev => {\n        const newObjectives = [...prev.objectives];\n        newObjectives[index] = value;\n        return {\n          ...prev,\n          objectives: newObjectives\n        };\n      });\n    } else {\n      setProjectData(prev => ({\n        ...prev,\n        [field]: value\n      }));\n    }\n  };\n\n  // Add new objective\n  const addObjective = () => {\n    setProjectData(prev => ({\n      ...prev,\n      objectives: [...prev.objectives, '']\n    }));\n  };\n\n  // Handle setup steps\n  const handleSetupComplete = projectData => {\n    setProjectData(projectData);\n    setProjectReady(true);\n\n    // Save project data to localStorage\n    localStorage.setItem('aiScientistProject', JSON.stringify(projectData));\n\n    // Show generating status\n    setCurrentPage('generating');\n    setGeneratingPlan(true);\n\n    // Simulate AI generating research plan\n    setTimeout(() => {\n      const researchPlan = generateResearchPlan();\n      setEditableContent(researchPlan);\n      // Save research plan to localStorage\n      localStorage.setItem('aiScientistResearchPlan', researchPlan);\n      setGeneratingPlan(false);\n      setCurrentPage('workspace');\n    }, 5000);\n  };\n\n  // Handle user query\n  const handleAskQuestion = query => {\n    if (!query.trim()) return;\n\n    // Add user question to chat history\n    setChatHistory(prev => [...prev, {\n      type: 'user',\n      content: query\n    }]);\n\n    // Start simulating workflow\n    setShowWorkflow(true);\n    setActiveStep(0);\n    simulateWorkflow();\n\n    // Clear input box\n    setUserQuery('');\n  };\n\n  // Handle text selection\n  const handleTextSelect = e => {\n    e.stopPropagation(); // Prevent event bubbling\n\n    if (contentEditableRef.current) {\n      const selection = window.getSelection();\n      const text = selection.toString().trim();\n      if (text && text.length > 0) {\n        const range = selection.getRangeAt(0);\n        const rect = range.getBoundingClientRect();\n        setSelectedText(text);\n        setSelectionPos({\n          x: rect.left + rect.width / 2,\n          y: rect.bottom + window.scrollY + 10\n        });\n        setShowTextSelector(true);\n        setTextQuestion(''); // Clear previous question, ensure input box is empty\n      }\n    }\n  };\n\n  // Handle text box click to prevent bubbling\n  const handleTextBoxClick = e => {\n    e.stopPropagation();\n  };\n\n  // Handle selected text question submission\n  const handleTextQuestion = () => {\n    if (!textQuestion) return;\n\n    // Add to chat history\n    setChatHistory(prev => [...prev, {\n      type: 'user',\n      content: `About \"${selectedText}\": ${textQuestion}`\n    }]);\n\n    // Hide question input\n    setShowTextSelector(false);\n\n    // Simulate AI processing\n    setShowWorkflow(true);\n    setActiveStep(0);\n\n    // Simulate short workflow\n    const shortWorkflow = () => {\n      let step = 0;\n      const interval = setInterval(() => {\n        if (step < 5) {\n          setActiveStep(step);\n          step++;\n        } else {\n          clearInterval(interval);\n          // Show AI suggestion\n          setShowSuggestion(true);\n          setAiSuggestion(`When optimizing signal peptides, several key factors need to be considered:\n\n1. **Signal Peptide Length**: Research shows that for P. pastoris, the optimal signal peptide length is typically 19-21 amino acids. Too long or too short can affect secretion efficiency.\n\n2. **Charged Amino Acid Distribution**: The N-terminal region should avoid negatively charged amino acids, while adding positively charged amino acids near the C-terminus can improve recognition efficiency.\n\n3. **Hydrophobic Core Region**: Ensure sufficient hydrophobic amino acids (such as Leu, Ile, Val) in the middle of the signal peptide to form a strong hydrophobic core.\n\n4. **Signal Peptidase Cleavage Site Optimization**: Optimize the -3 and -1 position amino acids, with Ala-X-Ala sequence being ideal.\n\nBased on the latest Liu et al. (2023) research, for large proteins, the modified version of SP14 signal peptide, SP14-R3 (replacing alanine at position 8 with valine) can increase secretion efficiency up to 1.4 times the original.`);\n        }\n      }, 700);\n    };\n    shortWorkflow();\n    setTextQuestion('');\n  };\n\n  // Apply AI suggestion\n  const handleAcceptSuggestion = () => {\n    // Replace selected text\n    const newContent = editableContent.replace(selectedText, selectedText + \"\\n\\n**Additional Note:**\\n\" + aiSuggestion);\n    setEditableContent(newContent);\n    setShowSuggestion(false);\n\n    // Add to chat history\n    setChatHistory(prev => [...prev, {\n      type: 'ai',\n      content: 'Supplementary information has been added to the document.'\n    }]);\n  };\n\n  // Regenerate suggestion\n  const handleRerunSuggestion = () => {\n    // Simulate rerunning\n    setShowSuggestion(false);\n    setShowWorkflow(true);\n    setActiveStep(0);\n\n    // Simulate short workflow, generate new suggestion\n    setTimeout(() => {\n      const newSuggestion = `Recent Zhang et al. (2024) research suggests that for signal peptide optimization, the matching of host preference and target protein characteristics should be considered. For large proteins, especially those containing multiple disulfide bonds, the following points should be prioritized:\n\n1. **Co-translational Translocation Efficiency**: Select signal peptides that promote co-translational translocation, avoiding unstable intermediates during translation.\n\n2. **Secondary Structure Propensity**: Avoid strong secondary structures at the junction between the signal peptide and mature protein, especially β-sheet structures.\n\n3. **Molecular Chaperone Binding Sites**: Optimize signal peptide sequences to enhance interactions with the Sec complex and molecular chaperones.\n\nTheir newly developed PichiaSig-12 sequence is recommended, which has shown excellent performance in secreting large proteins, with secretion efficiency 32% higher than the general α-MF.`;\n      setShowSuggestion(true);\n      setAiSuggestion(newSuggestion);\n    }, 4000);\n  };\n\n  // Render home view\n  const renderHome = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen bg-gray-900 flex flex-col items-center justify-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mb-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 mb-6\",\n        children: \"Welcome to Bota AI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl text-blue-200 max-w-2xl mx-auto\",\n        children: \"Start By Creating Your First Project To Work With an AI Scientist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage('setup'),\n      className: \"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg text-white font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(Plus, {\n        className: \"mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 9\n      }, this), \"Create Project\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 559,\n    columnNumber: 5\n  }, this);\n\n  // Render generating view\n  const renderGenerating = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 flex flex-col items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 rounded-xl p-10 shadow-2xl max-w-lg text-center space-y-6 border border-blue-500\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-20 h-20 bg-blue-900 rounded-full mx-auto flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(Sparkles, {\n          size: 32,\n          className: \"text-blue-400 animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-white\",\n        children: \"Generating Research Plan\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-300\",\n        children: [\"AI is creating a detailed research plan based on your project objective: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-blue-300\",\n          children: [\"\\\"\", projectData.objectives[0], \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 84\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-gray-700 h-2 rounded-full overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-500 h-full rounded-full animate-pulse\",\n            style: {\n              width: '80%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex flex-wrap gap-3 justify-center\",\n          children: ['Literature retrieval', 'Method analysis', 'Hypothesis formulation', 'Experimental design', 'Timeline optimization'].map((step, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `px-3 py-1 rounded-full text-xs ${i < 3 ? 'bg-green-900 text-green-300' : 'bg-blue-900 text-blue-300'}`,\n            children: [i < 3 ? '✓ ' : '', step]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 581,\n    columnNumber: 5\n  }, this);\n\n  // Main render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900\",\n    children: [currentPage === 'home' && renderHome(), currentPage === 'setup' && /*#__PURE__*/_jsxDEV(SetupWizard, {\n      onComplete: handleSetupComplete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 35\n    }, this), currentPage === 'generating' && renderGenerating(), currentPage === 'workspace' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-screen flex flex-col bg-gray-900\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"bg-gray-800 px-6 py-3 flex items-center justify-between shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-white font-medium text-lg\",\n          children: projectData.name || \"Research Project\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              if (window.confirm('Create a new project? Current project data will be saved.')) {\n                localStorage.removeItem('aiScientistProject');\n                localStorage.removeItem('aiScientistResearchPlan');\n                window.location.reload();\n              }\n            },\n            className: \"px-3 py-1.5 bg-blue-600 rounded-md text-white text-sm flex items-center hover:bg-blue-700 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(Plus, {\n              className: \"w-4 h-4 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 17\n            }, this), \"New Project\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"px-3 py-1.5 bg-gray-700 rounded-md text-gray-200 text-sm flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              className: \"w-4 h-4 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 17\n            }, this), \"Save\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(User, {\n              className: \"w-5 h-5 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(FileExplorer, {\n          projectData: projectData,\n          onAddNewFile: handleAddNewFile,\n          showNewFileMenu: showNewFileMenu,\n          setShowNewFileMenu: setShowNewFileMenu,\n          newFileMenuRef: newFileMenuRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DocumentEditor, {\n          editableContent: editableContent,\n          setEditableContent: setEditableContent,\n          contentEditableRef: contentEditableRef,\n          handleTextSelect: handleTextSelect,\n          runningBenchling: runningBenchling,\n          handleRunGeneticSimulation: handleRunGeneticSimulation,\n          selectedText: selectedText,\n          showTextSelector: showTextSelector,\n          setShowTextSelector: setShowTextSelector,\n          selectionPos: selectionPos,\n          textQuestion: textQuestion,\n          setTextQuestion: setTextQuestion,\n          handleTextQuestion: handleTextQuestion,\n          showSuggestion: showSuggestion,\n          setShowSuggestion: setShowSuggestion,\n          aiSuggestion: aiSuggestion,\n          handleAcceptSuggestion: handleAcceptSuggestion,\n          handleRerunSuggestion: handleRerunSuggestion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-96 bg-gray-800 border-l border-gray-700 flex flex-col\",\n          children: [showWorkflow && /*#__PURE__*/_jsxDEV(WorkflowVisualizer, {\n            steps: steps,\n            activeStep: activeStep,\n            stepLogs: stepLogs,\n            setShowWorkflow: setShowWorkflow\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ChatInterface, {\n            chatHistory: chatHistory,\n            userQuery: userQuery,\n            setUserQuery: setUserQuery,\n            handleAskQuestion: handleAskQuestion,\n            showWorkflow: showWorkflow,\n            setShowWorkflow: setShowWorkflow\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 675,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 11\n      }, this), showPlasmidViewer && /*#__PURE__*/_jsxDEV(PlasmidViewer, {\n        plasmidSequence: plasmidSequence,\n        setShowPlasmidViewer: setShowPlasmidViewer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 608,\n    columnNumber: 5\n  }, this);\n};\n_s(ScienceAIPlatform, \"F0nObvF+xRfad2hD9GXP4IDIP7s=\");\n_c = ScienceAIPlatform;\nexport default ScienceAIPlatform;\nvar _c;\n$RefreshReg$(_c, \"ScienceAIPlatform\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ChevronDown","ChevronRight","Database","Search","Zap","Brain","Layers","CheckCircle","Book","AlignJustify","FileText","Award","Server","BarChart3","Code","Folder","FolderOpen","File","BookOpen","Microscope","Globe","PieChart","Lock","Terminal","Monitor","Plus","User","MessageCircle","Sparkles","Activity","Settings","Maximize","Minimize","ArrowRight","Save","Calendar","DollarSign","Target","Edit","Layout","Send","X","Check","HelpCircle","RefreshCw","Play","MoreHorizontal","Dna","Beaker","FlaskConical","PlayCircle","dateUtils","FileExplorer","WorkflowVisualizer","ChatInterface","DocumentEditor","PlasmidViewer","SetupWizard","jsxDEV","_jsxDEV","ScienceAIPlatform","_s","savedProject","localStorage","getItem","initialProjectData","JSON","parse","name","objectives","timeline","hasExistingProject","currentPage","setCurrentPage","projectReady","setProjectReady","projectData","setProjectData","showWorkflow","setShowWorkflow","activeStep","setActiveStep","userQuery","setUserQuery","documentContent","setDocumentContent","chatHistory","setChatHistory","editableContent","setEditableContent","selectedText","setSelectedText","selectionPos","setSelectionPos","x","y","showTextSelector","setShowTextSelector","textQuestion","setTextQuestion","showSuggestion","setShowSuggestion","aiSuggestion","setAiSuggestion","generatingPlan","setGeneratingPlan","showNewFileMenu","setShowNewFileMenu","showPlasmidViewer","setShowPlasmidViewer","runningBenchling","setRunningBenchling","contentEditableRef","newFileMenuRef","setItem","steps","id","title","icon","size","fileName","_jsxFileName","lineNumber","columnNumber","stepLogs","generateResearchPlan","join","split","getDateAfterMonths","experimentPlanContent","plasmidSequence","length","features","start","end","color","type","sequence","handleAddNewFile","fileType","fileId","newContent","addFileToTree","prev","content","handleRunGeneticSimulation","setTimeout","simulateWorkflow","fullCycle","step","interval","setInterval","clearInterval","handleProjectChange","field","value","index","undefined","newObjectives","addObjective","handleSetupComplete","stringify","researchPlan","handleAskQuestion","query","trim","handleTextSelect","e","stopPropagation","current","selection","window","getSelection","text","toString","range","getRangeAt","rect","getBoundingClientRect","left","width","bottom","scrollY","handleTextBoxClick","handleTextQuestion","shortWorkflow","handleAcceptSuggestion","replace","handleRerunSuggestion","newSuggestion","renderHome","className","children","onClick","renderGenerating","style","map","i","onComplete","confirm","removeItem","location","reload","onAddNewFile","_c","$RefreshReg$"],"sources":["/Users/redli/Desktop/14/Bota/Code/ai_scientist_claude/src/pages/ScienceAIPlatform.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { \n  ChevronDown, ChevronRight, Database, Search, Zap, Brain, Layers, CheckCircle, Book, \n  AlignJustify, FileText, Award, Server, BarChart3, Code, Folder, FolderOpen, File,\n  BookOpen, Microscope, Globe, PieChart, Lock, Terminal, Monitor, Plus, User,\n  MessageCircle, Sparkles, Activity, Settings, Maximize, Minimize, ArrowRight, Save,\n  Calendar, DollarSign, Target, Edit, Layout, Send, X, Check, HelpCircle, RefreshCw,\n  Play, MoreHorizontal, Dna, Beaker, FlaskConical, PlayCircle\n} from 'lucide-react';\nimport { dateUtils } from '../utils/dateUtils';\nimport FileExplorer from '../components/layout/FileExplorer';\nimport WorkflowVisualizer from '../components/scientist/WorkflowVisualizer';\nimport ChatInterface from '../components/scientist/ChatInterface';\nimport DocumentEditor from '../components/scientist/DocumentEditor';\nimport PlasmidViewer from '../components/scientist/PlasmidViewer';\nimport SetupWizard from '../components/scientist/SetupWizard';\nimport '../styles/ScienceAIPlatform.css';\n\nconst ScienceAIPlatform = () => {\n  // Check for existing project in localStorage\n  const savedProject = localStorage.getItem('aiScientistProject');\n  const initialProjectData = savedProject ? JSON.parse(savedProject) : {\n    name: '',\n    objectives: [''],\n    timeline: ''\n  };\n  const hasExistingProject = savedProject !== null;\n  \n  // Page state - redirect to workspace if project exists\n  const [currentPage, setCurrentPage] = useState(hasExistingProject ? 'workspace' : 'home');\n  const [projectReady, setProjectReady] = useState(hasExistingProject);\n  \n  // Project data\n  const [projectData, setProjectData] = useState(initialProjectData);\n  \n  // Workspace state\n  const [showWorkflow, setShowWorkflow] = useState(false);\n  const [activeStep, setActiveStep] = useState(0);\n  const [userQuery, setUserQuery] = useState('');\n  const [documentContent, setDocumentContent] = useState('');\n  const [chatHistory, setChatHistory] = useState([]);\n  const [editableContent, setEditableContent] = useState(\n    localStorage.getItem('aiScientistResearchPlan') || ''\n  );\n  const [selectedText, setSelectedText] = useState('');\n  const [selectionPos, setSelectionPos] = useState({ x: 0, y: 0 });\n  const [showTextSelector, setShowTextSelector] = useState(false);\n  const [textQuestion, setTextQuestion] = useState('');\n  const [showSuggestion, setShowSuggestion] = useState(false);\n  const [aiSuggestion, setAiSuggestion] = useState('');\n  const [generatingPlan, setGeneratingPlan] = useState(false);\n  \n  // Status variables\n  const [showNewFileMenu, setShowNewFileMenu] = useState(false);\n  const [showPlasmidViewer, setShowPlasmidViewer] = useState(false);\n  const [runningBenchling, setRunningBenchling] = useState(false);\n  \n  // Refs\n  const contentEditableRef = useRef(null);\n  const newFileMenuRef = useRef(null);\n  \n  // Auto-save editable content to localStorage\n  useEffect(() => {\n    if (editableContent && projectReady) {\n      localStorage.setItem('aiScientistResearchPlan', editableContent);\n    }\n  }, [editableContent, projectReady]);\n  \n  // Workflow steps\n  const steps = [\n    { id: 0, title: \"Scientist Query\", icon: <Microscope size={16} /> },\n    { id: 1, title: \"Query Preprocessing\", icon: <AlignJustify size={16} /> },\n    { id: 2, title: \"Knowledge Retrieval\", icon: <Search size={16} /> },\n    { id: 3, title: \"Index Matching\", icon: <Database size={16} /> },\n    { id: 4, title: \"Knowledge Recall\", icon: <BookOpen size={16} /> },\n    { id: 5, title: \"Information Integration\", icon: <Layers size={16} /> },\n    { id: 6, title: \"Inference Generation\", icon: <Brain size={16} /> },\n    { id: 7, title: \"Answer Optimization\", icon: <Zap size={16} /> },\n    { id: 8, title: \"Final Answer\", icon: <Award size={16} /> }\n  ];\n\n  // Step logs\n  const stepLogs = {\n    0: [\n      \"[LOG] 11:42:03 - Receiving scientist query\",\n      \"[LOG] 11:42:03 - Starting query parsing engine\",\n      \"[LOG] 11:42:04 - Entity recognition complete: 3 key entities\",\n      \"[LOG] 11:42:04 - Classified as bioengineering specialized query\"\n    ],\n    1: [\n      \"[LOG] 11:42:05 - Starting query preprocessing\",\n      \"[LOG] 11:42:06 - Generating query vector representation\",\n      \"[LOG] 11:42:06 - Applying domain adaptation layer\",\n      \"[LOG] 11:42:07 - Identifying implicit needs: experimental design required\"\n    ],\n    2: [\n      \"[LOG] 11:42:08 - Starting distributed retrieval engine\",\n      \"[LOG] 11:42:09 - Simultaneously searching 4 external academic databases\",\n      \"[LOG] 11:42:10 - Searching internal experiment records\",\n      \"[LOG] 11:42:11 - Retrieving Benchling project data: PRJ-528974\"\n    ],\n    3: [\n      \"[LOG] 11:42:12 - Computing query vector similarity with knowledge base indices\",\n      \"[LOG] 11:42:13 - Using HNSW algorithm to accelerate similarity search\",\n      \"[LOG] 11:42:14 - Adjusting relevance scores with time decay factor\",\n      \"[LOG] 11:42:15 - Initial matching complete: 73 high-relevance indices identified\"\n    ],\n    4: [\n      \"[LOG] 11:42:16 - Starting deep parsing of matched documents\",\n      \"[LOG] 11:42:17 - Extracting key experimental steps from methods sections\",\n      \"[LOG] 11:42:18 - Parsing tabular data: experimental parameter data\",\n      \"[LOG] 11:42:19 - Extracting experimental design information from figures\"\n    ],\n    5: [\n      \"[LOG] 11:42:20 - Starting information integration engine\",\n      \"[LOG] 11:42:21 - Identifying associations between information sources\",\n      \"[LOG] 11:42:22 - Using confidence-weighted resolution for data conflicts\",\n      \"[LOG] 11:42:23 - Building knowledge graph: experimental design relationship network\"\n    ],\n    6: [\n      \"[LOG] 11:42:24 - Starting inference engine\",\n      \"[LOG] 11:42:25 - Constructing experimental design model\",\n      \"[LOG] 11:42:26 - Optimizing experimental parameters: calculating optimal conditions\",\n      \"[LOG] 11:42:27 - Deriving optimal experimental step sequence\"\n    ],\n    7: [\n      \"[LOG] 11:42:28 - Starting answer optimization module\",\n      \"[LOG] 11:42:29 - Restructuring answer organization\",\n      \"[LOG] 11:42:30 - Validating key data reference sources\",\n      \"[LOG] 11:42:31 - Terminology consistency check\"\n    ],\n    8: [\n      \"[LOG] 11:42:32 - Generating final answer\",\n      \"[LOG] 11:42:33 - Creating experimental design diagrams\",\n      \"[LOG] 11:42:34 - Formatting references\",\n      \"[LOG] 11:42:35 - Quality check: answer passed validation\"\n    ]\n  };\n\n  // Example research plan (generated based on project objectives)\n  const generateResearchPlan = () => {\n    return `# ${projectData.name} Research Plan\n\n## Project Overview\nThis project aims to ${projectData.objectives.join(\", and \")}. The plan is to complete all research work within ${projectData.timeline}.\n\n## Research Hypotheses\n1. **Primary Hypothesis**: By optimizing the expression system, we can significantly increase the yield and purity of the target protein\n2. **Secondary Hypothesis**: Precise control of expression conditions has a decisive impact on protein folding and activity\n3. **Test Metrics**: Expression level increase ≥30%, protein purity ≥95%, activity retention ≥85%\n\n## Experimental Design\n\n### Phase 1: Expression System Optimization (${projectData.timeline.split('to')[0]} - ${dateUtils.getDateAfterMonths(projectData.timeline, 2)})\n1. **Experiment 1.1**: Promoter screening and optimization\n   - Test 5 different strength promoters\n   - Establish fluorescent protein reporter system to evaluate promoter efficiency\n   - Use flow cytometry for quantitative analysis of expression levels\n\n2. **Experiment 1.2**: Signal peptide optimization\n   - Design and synthesize 3 different signal peptide sequences\n   - Construct test vectors and transform expression host\n   - Analyze secretion efficiency via Western blot\n\n### Phase 2: Culture Condition Optimization (${dateUtils.getDateAfterMonths(projectData.timeline, 2)} - ${dateUtils.getDateAfterMonths(projectData.timeline, 4)})\n1. **Experiment 2.1**: Culture medium component screening\n   - Orthogonal design of different carbon and nitrogen source combinations\n   - Monitor growth curves and protein expression levels\n   - Determine optimal culture medium formulation\n\n2. **Experiment 2.2**: Culture parameter optimization\n   - Use controlled variable method to test temperature, pH and dissolved oxygen conditions\n   - Establish response surface model to predict optimal combinations\n   - Verify model accuracy\n\n### Phase 3: Purification Process Development (${dateUtils.getDateAfterMonths(projectData.timeline, 4)} - ${projectData.timeline.split('to')[1]})\n1. **Experiment 3.1**: Chromatography condition screening\n   - Test different types of chromatography media\n   - Optimize elution conditions and gradient settings\n   - Improve protein purity and recovery rate\n\n2. **Experiment 3.2**: Final product quality analysis\n   - Perform mass spectrometric analysis to confirm protein integrity\n   - Test protein biological activity\n   - Evaluate stability and shelf life\n\n## Expected Results\n1. Determine the optimal expression system combination, increasing yield by 30-50%\n2. Establish a stable, reproducible production process\n3. Obtain high-quality, high-activity target protein\n\n## Timeline and Milestones\n- **${dateUtils.getDateAfterMonths(projectData.timeline, 2)}**: Complete expression system optimization, determine optimal promoter and signal peptide combination\n- **${dateUtils.getDateAfterMonths(projectData.timeline, 4)}**: Complete culture condition optimization, establish standard production process\n- **${projectData.timeline.split('to')[1]}**: Complete purification process development, submit final research report\n\n## Required Resources\n- Molecular biology experimental equipment and reagents\n- Bioreactors and fermentation equipment\n- Protein analysis equipment (HPLC, mass spectrometer, etc.)\n- Bioinformatics analysis software\n\n## Risk Assessment and Mitigation Strategies\n1. **Risk**: Expression level below expectation\n   **Mitigation**: Prepare alternative promoters and expression systems\n\n2. **Risk**: Protein aggregation or misfolding\n   **Mitigation**: Explore molecular chaperone co-expression strategies\n\n3. **Risk**: Large yield loss in purification process\n   **Mitigation**: Develop one-step purification method under mild conditions`;\n  };\n\n  // Experiment plan content\n  const experimentPlanContent = `# Genetic Engineering Experiment Plan\n\n## Experimental Objectives\nConstruct and validate a recombinant plasmid that efficiently expresses the target protein and achieve stable expression in Pichia pastoris.\n\n## Materials and Methods\n\n### 1. Plasmid Design\nBased on the latest research results, we have designed an optimized expression vector including the following elements:\n- **Promoter**: pAOX1 (methanol-inducible, high expression efficiency)\n- **Signal Peptide**: Optimized α-MF signal peptide (EA sequence deleted)\n- **Target Gene**: Codon-optimized human-derived gene\n- **Terminator**: AOX1 terminator\n- **Selection Marker**: Zeocin resistance gene\n\n### 2. Cloning Strategy\n1. PCR amplification of target gene, primer design includes appropriate restriction enzyme sites\n2. Restriction enzyme digestion of vector and target gene\n3. Ligation reaction to construct recombinant plasmid\n4. Transform E. coli DH5α\n5. Screen positive clones and verify sequence\n\n### 3. Host Transformation\n1. Linearize recombinant plasmid\n2. Prepare P. pastoris GS115 competent cells\n3. Electroporation\n4. Screen transformants on YPD plates containing Zeocin\n\n### 4. Expression Validation\n1. Small-scale expression test\n2. SDS-PAGE and Western blot analysis\n3. Protein activity determination\n\n## Expected Results\nThe constructed recombinant plasmid is expected to achieve efficient and stable target protein expression in P. pastoris, with protein yield ≥3.5g/L and purity ≥90%.\n\n## Schedule\n- Weeks 1-2: Plasmid design and construction\n- Weeks 3-4: Host transformation and screening\n- Weeks 5-8: Expression condition optimization and validation`;\n\n  // DNA sequence data (simulated)\n  const plasmidSequence = {\n    name: \"pPIC-hProtein-Opt\",\n    length: 8245,\n    features: [\n      { name: \"pAOX1 Promoter\", start: 1, end: 948, color: \"#3B82F6\", type: \"promoter\" },\n      { name: \"α-MF Signal\", start: 949, end: 1218, color: \"#10B981\", type: \"signal_peptide\" },\n      { name: \"Target Gene\", start: 1219, end: 4017, color: \"#F43F5E\", type: \"CDS\" },\n      { name: \"AOX1 Terminator\", start: 4018, end: 4352, color: \"#A855F7\", type: \"terminator\" },\n      { name: \"Zeocin Resistance\", start: 4353, end: 5153, color: \"#F59E0B\", type: \"marker\" },\n      { name: \"pUC Origin\", start: 5154, end: 7803, color: \"#64748B\", type: \"rep_origin\" },\n      { name: \"Ampicillin Resistance\", start: 7804, end: 8245, color: \"#EC4899\", type: \"marker\" }\n    ],\n    sequence: \"ATGGCTATGCAGAAACTGAAAGCGCTGGCGACCCTGGAAGTGCGTCTGACCACCCTGAGC...\" // Abbreviated actual sequence\n  };\n\n  // Handle adding new file\n  const handleAddNewFile = (fileType) => {\n    let fileId = null;\n    let newContent = '';\n    \n    switch(fileType) {\n      case 'project':\n        fileId = addFileToTree('folder', 'New Research Project');\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Create a new research project'\n        }, {\n          type: 'ai',\n          content: 'I have created a new research project. Please check the file tree on the left.'\n        }]);\n        break;\n      case 'objective':\n        fileId = addFileToTree('folder', 'New Research Objective');\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Add a new research objective'\n        }, {\n          type: 'ai',\n          content: 'New research objective added. You can view and edit it in the file tree on the left.'\n        }]);\n        break;\n      case 'plan':\n        fileId = addFileToTree('file', 'Research Plan');\n        // Update document content to research plan\n        setEditableContent(generateResearchPlan());\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Generate a research plan'\n        }, {\n          type: 'ai',\n          content: 'I have generated a detailed research plan based on your project objectives.'\n        }]);\n        break;\n      case 'hypothesis':\n        fileId = addFileToTree('file', 'Research Hypothesis');\n        newContent = `# Research Hypothesis\\n\\n## Primary Hypothesis\\nIn ${projectData.name || \"current research\"}, we hypothesize that by optimizing expression system components and culture conditions, we can significantly increase the yield and quality of the target protein.\\n\\n## Secondary Hypotheses\\n1. Promoter selection has a decisive effect on expression level\\n2. Signal peptide optimization can improve secretion efficiency\\n3. Precise control of culture conditions can reduce protein degradation\\n\\n## Hypothesis Testing Methods\\nWe will validate these hypotheses through systematic experimental design and control experiments, including:\\n- Comparing expression levels of different promoter systems\\n- Measuring secretion efficiency of improved signal peptides\\n- Monitoring protein yield and quality under different culture conditions`;\n        setEditableContent(newContent);\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Create research hypothesis'\n        }, {\n          type: 'ai',\n          content: 'I have created a research hypothesis document that you can further modify as needed.'\n        }]);\n        break;\n      case 'experiment':\n        fileId = addFileToTree('file', 'Experiment Plan');\n        // Update to experiment plan\n        setEditableContent(experimentPlanContent);\n        setChatHistory(prev => [...prev, {\n          type: 'user',\n          content: 'Generate an experiment plan'\n        }, {\n          type: 'ai',\n          content: 'I have generated a genetic engineering experiment plan. You can view it and run gene construction simulation.'\n        }]);\n        break;\n    }\n    \n    return fileId;\n  };\n\n  // Handle running genetic simulation\n  const handleRunGeneticSimulation = () => {\n    setRunningBenchling(true);\n    \n    // Simulate running Benchling API\n    setTimeout(() => {\n      setRunningBenchling(false);\n      setShowPlasmidViewer(true);\n      \n      // Add to chat history\n      setChatHistory(prev => [...prev, {\n        type: 'ai',\n        content: 'Gene design and simulation completed. Successfully constructed target plasmid: pPIC-hProtein-Opt (8245 bp).'\n      }]);\n    }, 3000);\n  };\n\n  // Simulate knowledge base processing workflow\n  const simulateWorkflow = (fullCycle = true) => {\n    let step = 0;\n    const interval = setInterval(() => {\n      if (step < steps.length) {\n        setActiveStep(step);\n        step++;\n      } else {\n        clearInterval(interval);\n        if (fullCycle) {\n          // Add answer after simulation is complete\n          setEditableContent(experimentPlanContent);\n          setChatHistory(prev => [...prev, {\n            type: 'ai',\n            content: 'I have completed the answer based on the knowledge base. The result has been added to the document.'\n          }]);\n        }\n      }\n    }, 1000);\n  };\n\n  // Handle project form change\n  const handleProjectChange = (field, value, index) => {\n    if (field === 'objectives' && index !== undefined) {\n      setProjectData(prev => {\n        const newObjectives = [...prev.objectives];\n        newObjectives[index] = value;\n        return { ...prev, objectives: newObjectives };\n      });\n    } else {\n      setProjectData(prev => ({ ...prev, [field]: value }));\n    }\n  };\n\n  // Add new objective\n  const addObjective = () => {\n    setProjectData(prev => ({\n      ...prev,\n      objectives: [...prev.objectives, '']\n    }));\n  };\n\n  // Handle setup steps\n  const handleSetupComplete = (projectData) => {\n    setProjectData(projectData);\n    setProjectReady(true);\n    \n    // Save project data to localStorage\n    localStorage.setItem('aiScientistProject', JSON.stringify(projectData));\n    \n    // Show generating status\n    setCurrentPage('generating');\n    setGeneratingPlan(true);\n    \n    // Simulate AI generating research plan\n    setTimeout(() => {\n      const researchPlan = generateResearchPlan();\n      setEditableContent(researchPlan);\n      // Save research plan to localStorage\n      localStorage.setItem('aiScientistResearchPlan', researchPlan);\n      setGeneratingPlan(false);\n      setCurrentPage('workspace');\n    }, 5000);\n  };\n\n  // Handle user query\n  const handleAskQuestion = (query) => {\n    if (!query.trim()) return;\n    \n    // Add user question to chat history\n    setChatHistory(prev => [...prev, {\n      type: 'user',\n      content: query\n    }]);\n    \n    // Start simulating workflow\n    setShowWorkflow(true);\n    setActiveStep(0);\n    simulateWorkflow();\n    \n    // Clear input box\n    setUserQuery('');\n  };\n\n  // Handle text selection\n  const handleTextSelect = (e) => {\n    e.stopPropagation(); // Prevent event bubbling\n    \n    if (contentEditableRef.current) {\n      const selection = window.getSelection();\n      const text = selection.toString().trim();\n      \n      if (text && text.length > 0) {\n        const range = selection.getRangeAt(0);\n        const rect = range.getBoundingClientRect();\n        \n        setSelectedText(text);\n        setSelectionPos({\n          x: rect.left + rect.width/2,\n          y: rect.bottom + window.scrollY + 10\n        });\n        setShowTextSelector(true);\n        setTextQuestion(''); // Clear previous question, ensure input box is empty\n      }\n    }\n  };\n  \n  // Handle text box click to prevent bubbling\n  const handleTextBoxClick = (e) => {\n    e.stopPropagation();\n  };\n\n  // Handle selected text question submission\n  const handleTextQuestion = () => {\n    if (!textQuestion) return;\n    \n    // Add to chat history\n    setChatHistory(prev => [...prev, {\n      type: 'user',\n      content: `About \"${selectedText}\": ${textQuestion}`\n    }]);\n    \n    // Hide question input\n    setShowTextSelector(false);\n    \n    // Simulate AI processing\n    setShowWorkflow(true);\n    setActiveStep(0);\n    \n    // Simulate short workflow\n    const shortWorkflow = () => {\n      let step = 0;\n      const interval = setInterval(() => {\n        if (step < 5) {\n          setActiveStep(step);\n          step++;\n        } else {\n          clearInterval(interval);\n          // Show AI suggestion\n          setShowSuggestion(true);\n          setAiSuggestion(`When optimizing signal peptides, several key factors need to be considered:\n\n1. **Signal Peptide Length**: Research shows that for P. pastoris, the optimal signal peptide length is typically 19-21 amino acids. Too long or too short can affect secretion efficiency.\n\n2. **Charged Amino Acid Distribution**: The N-terminal region should avoid negatively charged amino acids, while adding positively charged amino acids near the C-terminus can improve recognition efficiency.\n\n3. **Hydrophobic Core Region**: Ensure sufficient hydrophobic amino acids (such as Leu, Ile, Val) in the middle of the signal peptide to form a strong hydrophobic core.\n\n4. **Signal Peptidase Cleavage Site Optimization**: Optimize the -3 and -1 position amino acids, with Ala-X-Ala sequence being ideal.\n\nBased on the latest Liu et al. (2023) research, for large proteins, the modified version of SP14 signal peptide, SP14-R3 (replacing alanine at position 8 with valine) can increase secretion efficiency up to 1.4 times the original.`);\n        }\n      }, 700);\n    };\n    \n    shortWorkflow();\n    setTextQuestion('');\n  };\n\n  // Apply AI suggestion\n  const handleAcceptSuggestion = () => {\n    // Replace selected text\n    const newContent = editableContent.replace(\n      selectedText,\n      selectedText + \"\\n\\n**Additional Note:**\\n\" + aiSuggestion\n    );\n    \n    setEditableContent(newContent);\n    setShowSuggestion(false);\n    \n    // Add to chat history\n    setChatHistory(prev => [...prev, {\n      type: 'ai',\n      content: 'Supplementary information has been added to the document.'\n    }]);\n  };\n\n  // Regenerate suggestion\n  const handleRerunSuggestion = () => {\n    // Simulate rerunning\n    setShowSuggestion(false);\n    setShowWorkflow(true);\n    setActiveStep(0);\n    \n    // Simulate short workflow, generate new suggestion\n    setTimeout(() => {\n      const newSuggestion = `Recent Zhang et al. (2024) research suggests that for signal peptide optimization, the matching of host preference and target protein characteristics should be considered. For large proteins, especially those containing multiple disulfide bonds, the following points should be prioritized:\n\n1. **Co-translational Translocation Efficiency**: Select signal peptides that promote co-translational translocation, avoiding unstable intermediates during translation.\n\n2. **Secondary Structure Propensity**: Avoid strong secondary structures at the junction between the signal peptide and mature protein, especially β-sheet structures.\n\n3. **Molecular Chaperone Binding Sites**: Optimize signal peptide sequences to enhance interactions with the Sec complex and molecular chaperones.\n\nTheir newly developed PichiaSig-12 sequence is recommended, which has shown excellent performance in secreting large proteins, with secretion efficiency 32% higher than the general α-MF.`;\n      \n      setShowSuggestion(true);\n      setAiSuggestion(newSuggestion);\n    }, 4000);\n  };\n\n  // Render home view\n  const renderHome = () => (\n    <div className=\"h-screen bg-gray-900 flex flex-col items-center justify-center\">\n      <div className=\"text-center mb-12\">\n        <h1 className=\"text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 mb-6\">\n        Welcome to Bota AI \n        </h1>\n        <p className=\"text-xl text-blue-200 max-w-2xl mx-auto\">\n        Start By Creating Your First Project To Work With an AI Scientist\n        </p>\n      </div>\n      \n      <button \n        onClick={() => setCurrentPage('setup')}\n        className=\"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg text-white font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center\"\n      >\n        <Plus className=\"mr-2\" />\n        Create Project\n      </button>\n    </div>\n  );\n\n  // Render generating view\n  const renderGenerating = () => (\n    <div className=\"min-h-screen bg-gray-900 flex flex-col items-center justify-center\">\n      <div className=\"bg-gray-800 rounded-xl p-10 shadow-2xl max-w-lg text-center space-y-6 border border-blue-500\">\n        <div className=\"w-20 h-20 bg-blue-900 rounded-full mx-auto flex items-center justify-center\">\n          <Sparkles size={32} className=\"text-blue-400 animate-pulse\" />\n        </div>\n        <h2 className=\"text-2xl font-bold text-white\">Generating Research Plan</h2>\n        <p className=\"text-gray-300\">\n          AI is creating a detailed research plan based on your project objective: <span className=\"text-blue-300\">\"{projectData.objectives[0]}\"</span>\n        </p>\n        <div className=\"pt-2\">\n          <div className=\"w-full bg-gray-700 h-2 rounded-full overflow-hidden\">\n            <div className=\"bg-blue-500 h-full rounded-full animate-pulse\" style={{width: '80%'}}></div>\n          </div>\n          <div className=\"mt-4 flex flex-wrap gap-3 justify-center\">\n            {['Literature retrieval', 'Method analysis', 'Hypothesis formulation', 'Experimental design', 'Timeline optimization'].map((step, i) => (\n              <span key={i} className={`px-3 py-1 rounded-full text-xs ${i < 3 ? 'bg-green-900 text-green-300' : 'bg-blue-900 text-blue-300'}`}>\n                {i < 3 ? '✓ ' : ''}{step}\n              </span>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  // Main render\n  return (\n    <div className=\"min-h-screen bg-gray-900\">\n      {currentPage === 'home' && renderHome()}\n      {currentPage === 'setup' && <SetupWizard onComplete={handleSetupComplete} />}\n      {currentPage === 'generating' && renderGenerating()}\n      {currentPage === 'workspace' && (\n        <div className=\"h-screen flex flex-col bg-gray-900\">\n          {/* Header */}\n          <header className=\"bg-gray-800 px-6 py-3 flex items-center justify-between shadow-md\">\n            <div className=\"text-white font-medium text-lg\">{projectData.name || \"Research Project\"}</div>\n            <div className=\"flex items-center gap-4\">\n              <button \n                onClick={() => {\n                  if (window.confirm('Create a new project? Current project data will be saved.')) {\n                    localStorage.removeItem('aiScientistProject');\n                    localStorage.removeItem('aiScientistResearchPlan');\n                    window.location.reload();\n                  }\n                }}\n                className=\"px-3 py-1.5 bg-blue-600 rounded-md text-white text-sm flex items-center hover:bg-blue-700 transition-colors\"\n              >\n                <Plus className=\"w-4 h-4 mr-1\" />\n                New Project\n              </button>\n              <button className=\"px-3 py-1.5 bg-gray-700 rounded-md text-gray-200 text-sm flex items-center\">\n                <Save className=\"w-4 h-4 mr-1\" />\n                Save\n              </button>\n              <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center\">\n                <User className=\"w-5 h-5 text-white\" />\n              </div>\n            </div>\n          </header>\n          \n          {/* Main workspace: three-column layout */}\n          <div className=\"flex-1 flex overflow-hidden\">\n            {/* Left sidebar: file navigation */}\n            <FileExplorer \n              projectData={projectData}\n              onAddNewFile={handleAddNewFile}\n              showNewFileMenu={showNewFileMenu}\n              setShowNewFileMenu={setShowNewFileMenu}\n              newFileMenuRef={newFileMenuRef}\n            />\n            \n            {/* Middle content area */}\n            <DocumentEditor \n              editableContent={editableContent}\n              setEditableContent={setEditableContent}\n              contentEditableRef={contentEditableRef}\n              handleTextSelect={handleTextSelect}\n              runningBenchling={runningBenchling}\n              handleRunGeneticSimulation={handleRunGeneticSimulation}\n              selectedText={selectedText}\n              showTextSelector={showTextSelector}\n              setShowTextSelector={setShowTextSelector}\n              selectionPos={selectionPos}\n              textQuestion={textQuestion}\n              setTextQuestion={setTextQuestion}\n              handleTextQuestion={handleTextQuestion}\n              showSuggestion={showSuggestion}\n              setShowSuggestion={setShowSuggestion}\n              aiSuggestion={aiSuggestion}\n              handleAcceptSuggestion={handleAcceptSuggestion}\n              handleRerunSuggestion={handleRerunSuggestion}\n            />\n            \n            {/* Right sidebar: AI assistant and workflow */}\n            <div className=\"w-96 bg-gray-800 border-l border-gray-700 flex flex-col\">\n              {/* Workflow part */}\n              {showWorkflow && (\n                <WorkflowVisualizer \n                  steps={steps}\n                  activeStep={activeStep}\n                  stepLogs={stepLogs}\n                  setShowWorkflow={setShowWorkflow}\n                />\n              )}\n              \n              {/* Chat part */}\n              <ChatInterface \n                chatHistory={chatHistory}\n                userQuery={userQuery}\n                setUserQuery={setUserQuery}\n                handleAskQuestion={handleAskQuestion}\n                showWorkflow={showWorkflow}\n                setShowWorkflow={setShowWorkflow}\n              />\n            </div>\n          </div>\n          \n          {/* Plasmid viewer modal */}\n          {showPlasmidViewer && (\n            <PlasmidViewer \n              plasmidSequence={plasmidSequence}\n              setShowPlasmidViewer={setShowPlasmidViewer}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ScienceAIPlatform;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}